<div class="register-container" [@fadeAnimation]>
  <div class="register-card">
    <div class="logo-section">
      <img src="assets/images/logo.png" alt="Les Audacieuses Logo" class="logo">
      <h1>Les Audacieuses</h1>
    </div>

    <h2>Inscription</h2>
    
    <div *ngIf="error" class="alert alert-danger" [@alertAnimation]>
      {{ error }}
    </div>

    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" [@formAnimation]>
      <div class="form-row">
        <div class="form-group">
          <label for="prenom">Prénom</label>
          <input 
            type="text" 
            id="prenom" 
            formControlName="prenom" 
            class="form-control" 
            [ngClass]="{ 'is-invalid': submitted && f['prenom'].errors }"
            placeholder="Votre prénom"
          >
          <div *ngIf="submitted && f['prenom'].errors" class="invalid-feedback">
            <div *ngIf="f['prenom'].errors['required']">Le prénom est requis</div>
            <div *ngIf="f['prenom'].errors['minlength']">Le prénom doit comporter au moins 2 caractères</div>
          </div>
        </div>

        <div class="form-group">
          <label for="nom">Nom</label>
          <input 
            type="text" 
            id="nom" 
            formControlName="nom" 
            class="form-control" 
            [ngClass]="{ 'is-invalid': submitted && f['nom'].errors }"
            placeholder="Votre nom"
          >
          <div *ngIf="submitted && f['nom'].errors" class="invalid-feedback">
            <div *ngIf="f['nom'].errors['required']">Le nom est requis</div>
            <div *ngIf="f['nom'].errors['minlength']">Le nom doit comporter au moins 2 caractères</div>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="mail">Adresse e-mail</label>
        <input 
          type="email" 
          id="mail" 
          formControlName="mail" 
          class="form-control" 
          [ngClass]="{ 'is-invalid': submitted && f['mail'].errors }"
          placeholder="votre@email.com"
        >
        <div *ngIf="submitted && f['mail'].errors" class="invalid-feedback">
          <div *ngIf="f['mail'].errors['required']">L'email est requis</div>
          <div *ngIf="f['mail'].errors['email']">Veuillez entrer une adresse e-mail valide</div>
        </div>
      </div>

      <div class="form-group">
        <label for="date_naissance">Date de naissance</label>
        <input 
          type="date" 
          id="date_naissance" 
          formControlName="date_naissance" 
          class="form-control"
        >
      </div>

      <div class="form-group">
        <label for="mdp">Mot de passe</label>
        <input 
          type="password" 
          id="mdp" 
          formControlName="mdp" 
          class="form-control" 
          [ngClass]="{ 'is-invalid': submitted && f['mdp'].errors }"
          placeholder="Votre mot de passe"
        >
        <div *ngIf="submitted && f['mdp'].errors" class="invalid-feedback">
          <div *ngIf="f['mdp'].errors['required']">Le mot de passe est requis</div>
          <div *ngIf="f['mdp'].errors['minlength']">Le mot de passe doit comporter au moins 8 caractères</div>
        </div>
      </div>

      <div class="form-group">
        <label for="mdpConfirm">Confirmer le mot de passe</label>
        <input 
          type="password" 
          id="mdpConfirm" 
          formControlName="mdpConfirm" 
          class="form-control" 
          [ngClass]="{ 'is-invalid': submitted && (f['mdpConfirm'].errors || registerForm.hasError('mismatch')) }"
          placeholder="Confirmez votre mot de passe"
        >
        <div *ngIf="submitted && (f['mdpConfirm'].errors || registerForm.hasError('mismatch'))" class="invalid-feedback">
          <div *ngIf="f['mdpConfirm'].errors?.['required']">La confirmation du mot de passe est requise</div>
          <div *ngIf="registerForm.hasError('mismatch')">Les mots de passe ne correspondent pas</div>
        </div>
      </div>

      <div class="form-group terms-checkbox">
        <div class="checkbox-wrapper">
          <input 
            type="checkbox" 
            id="acceptTerms" 
            formControlName="acceptTerms" 
            [ngClass]="{ 'is-invalid': submitted && f['acceptTerms'].errors }"
          >
          <label for="acceptTerms" class="checkbox-label">J'accepte les <a href="#">conditions d'utilisation</a> et la <a href="#">politique de confidentialité</a>.</label>
        </div>
        <div *ngIf="submitted && f['acceptTerms'].errors" class="invalid-feedback">
          <div *ngIf="f['acceptTerms'].errors['required']">Vous devez accepter les conditions d'utilisation</div>
        </div>
      </div>

      <div class="form-group">
        <button [disabled]="loading" class="btn btn-primary btn-block">
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
          S'inscrire
        </button>
      </div>

      <div class="login-link">
        Vous avez déjà un compte ? <a routerLink="/login">Connectez-vous</a>
      </div>
    </form>
  </div>
</div>